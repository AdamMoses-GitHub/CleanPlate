ServerName localhost

<VirtualHost *:80>
    DocumentRoot /var/www/html/public

    <Directory /var/www/html/public>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # Block direct web access to private directories that live outside public/
    # (belt-and-suspenders â€” they're above the doc root anyway)
    <DirectoryMatch "^/var/www/html/(includes|config|storage|examples|\.git)">
        Require all denied
    </DirectoryMatch>

    # Pass Docker environment variables into PHP (mod_php / mod_env)
    PassEnv DB_CONNECTION DB_HOST DB_PORT DB_DATABASE DB_USERNAME DB_PASSWORD
    PassEnv APP_ENV APP_DEBUG APP_TIMEZONE
    PassEnv ADMIN_USERNAME ADMIN_PASSWORD CACHE_TTL_HOURS FEATURED_SUBSET_SIZE
    PassEnv SCRAPER_TIMEOUT SCRAPER_MIN_DELAY SCRAPER_MAX_REDIRECTS SCRAPER_SSL_VERIFY
    PassEnv ALLOWED_ORIGINS RATE_LIMIT_ENABLED RATE_LIMIT_REQUESTS RATE_LIMIT_PERIOD
    PassEnv TEMP_DIR LOG_DIR

    ErrorLog  ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
